{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Permission","description":"权限管理 API"},{"name":"Auth","description":"鉴权检查 API"},{"name":"Feed","description":"饲料管理相关 API"},{"name":"Feeding","description":"投喂记录管理 API"},{"name":"Enclosure","description":"展区管理相关 API"},{"name":"User","description":"用户与账号管理 API"},{"name":"Log","description":"日志管理 API"},{"name":"SystemConfig","description":"系统配置管理 API"}],"paths":{"/api/users/{id}":{"get":{"tags":["User"],"summary":"根据ID获取用户","operationId":"get","parameters":[{"name":"id","in":"path","description":"用户ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserAccount"}}}}}},"put":{"tags":["User"],"summary":"更新用户","operationId":"update","parameters":[{"name":"id","in":"path","description":"用户ID","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"用户对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccount"}}},"required":true},"responses":{"200":{"description":"OK"}}},"delete":{"tags":["User"],"summary":"删除用户","operationId":"delete","parameters":[{"name":"id","in":"path","description":"用户ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/feeds/{id}":{"get":{"tags":["Feed"],"summary":"根据 ID 获取饲料","operationId":"get_2","parameters":[{"name":"id","in":"path","description":"饲料ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Feed"}}}}}},"put":{"tags":["Feed"],"summary":"更新饲料","operationId":"update_1","parameters":[{"name":"id","in":"path","description":"饲料ID","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"饲料对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Feed"}}},"required":true},"responses":{"200":{"description":"OK"}}},"delete":{"tags":["Feed"],"summary":"删除饲料","operationId":"delete_2","parameters":[{"name":"id","in":"path","description":"饲料ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/enclosures/{id}":{"get":{"tags":["Enclosure"],"summary":"根据 ID 获取展区","operationId":"get_4","parameters":[{"name":"id","in":"path","description":"展区ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Enclosure"}}}}}},"put":{"tags":["Enclosure"],"summary":"更新展区","operationId":"update_2","parameters":[{"name":"id","in":"path","description":"展区ID","required":true,"schema":{"type":"string"}}],"requestBody":{"description":"展区对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Enclosure"}}},"required":true},"responses":{"200":{"description":"OK"}}},"delete":{"tags":["Enclosure"],"summary":"删除展区","operationId":"delete_3","parameters":[{"name":"id","in":"path","description":"展区ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/users":{"post":{"tags":["User"],"summary":"创建用户","operationId":"create","requestBody":{"description":"用户对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAccount"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/users/auth":{"post":{"tags":["User"],"summary":"用户认证（简单）","operationId":"auth","parameters":[{"name":"username","in":"query","description":"用户名","required":true,"schema":{"type":"string"}},{"name":"password","in":"query","description":"密码","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/permissions":{"get":{"tags":["Permission"],"summary":"列出所有权限","operationId":"listAll","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Permission"}}}}}}},"post":{"tags":["Permission"],"summary":"创建权限","operationId":"create_1","requestBody":{"description":"权限对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Permission"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/permissions/revoke":{"post":{"tags":["Permission"],"summary":"从角色回收权限","operationId":"revoke","parameters":[{"name":"role","in":"query","description":"角色名","required":true,"schema":{"type":"string"}},{"name":"permissionId","in":"query","description":"权限ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/permissions/assign":{"post":{"tags":["Permission"],"summary":"分配权限到角色","operationId":"assign","parameters":[{"name":"role","in":"query","description":"角色名","required":true,"schema":{"type":"string"}},{"name":"permissionId","in":"query","description":"权限ID","required":true,"schema":{"type":"string"}},{"name":"grantedBy","in":"query","description":"分配人ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/logs/operation":{"get":{"tags":["Log"],"summary":"列出操作日志","operationId":"listOperationLogs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/OperationLog"}}}}}}},"post":{"tags":["Log"],"summary":"记录操作日志","operationId":"logOperation","requestBody":{"description":"操作日志对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OperationLog"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/logs/login":{"get":{"tags":["Log"],"summary":"列出登录日志","operationId":"listLoginLogs","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/LoginLog"}}}}}}},"post":{"tags":["Log"],"summary":"记录登录日志","operationId":"logLogin","requestBody":{"description":"登录日志对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginLog"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/feeds":{"get":{"tags":["Feed"],"summary":"列出所有饲料","operationId":"listAll_1","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Feed"}}}}}}},"post":{"tags":["Feed"],"summary":"创建饲料","operationId":"create_2","requestBody":{"description":"饲料对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Feed"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/feeds/{id}/increase":{"post":{"tags":["Feed"],"summary":"增加饲料库存","operationId":"increase","parameters":[{"name":"id","in":"path","description":"饲料ID","required":true,"schema":{"type":"string"}},{"name":"qty","in":"query","description":"增加数量","required":true,"schema":{"type":"number"}}],"responses":{"200":{"description":"OK"}}}},"/api/feeds/{id}/decrease":{"post":{"tags":["Feed"],"summary":"减少饲料库存","operationId":"decrease","parameters":[{"name":"id","in":"path","description":"饲料ID","required":true,"schema":{"type":"string"}},{"name":"qty","in":"query","description":"减少数量","required":true,"schema":{"type":"number"}}],"responses":{"200":{"description":"OK"}}}},"/api/feedings":{"get":{"tags":["Feeding"],"summary":"列出所有投喂记录","operationId":"listAll_2","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/FeedingRecord"}}}}}}},"post":{"tags":["Feeding"],"summary":"创建投喂记录","operationId":"create_3","requestBody":{"description":"记录对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/FeedingRecord"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/feedings/{id}/reject":{"post":{"tags":["Feeding"],"summary":"审批投喂记录 - 拒绝","operationId":"reject","parameters":[{"name":"id","in":"path","description":"记录ID","required":true,"schema":{"type":"string"}},{"name":"verifierId","in":"query","description":"审核人ID","required":true,"schema":{"type":"string"}},{"name":"notes","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/feedings/{id}/approve":{"post":{"tags":["Feeding"],"summary":"审批投喂记录 - 通过","operationId":"approve","parameters":[{"name":"id","in":"path","description":"记录ID","required":true,"schema":{"type":"string"}},{"name":"verifierId","in":"query","description":"审核人ID","required":true,"schema":{"type":"string"}},{"name":"notes","in":"query","required":false,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/enclosures":{"get":{"tags":["Enclosure"],"summary":"列出所有展区","operationId":"listAll_3","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Enclosure"}}}}}}},"post":{"tags":["Enclosure"],"summary":"创建展区","operationId":"create_4","requestBody":{"description":"展区对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Enclosure"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/configs":{"get":{"tags":["SystemConfig"],"summary":"列出所有配置","operationId":"listAll_4","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SystemConfig"}}}}}}},"post":{"tags":["SystemConfig"],"summary":"设置配置","operationId":"set","requestBody":{"description":"配置对象","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SystemConfig"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/api/users/by-username":{"get":{"tags":["User"],"summary":"根据用户名获取用户","operationId":"getByUsername","parameters":[{"name":"username","in":"query","description":"用户名","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserAccount"}}}}}}},"/api/permissions/{id}":{"get":{"tags":["Permission"],"summary":"根据ID获取权限","operationId":"get_1","parameters":[{"name":"id","in":"path","description":"权限ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Permission"}}}}}},"delete":{"tags":["Permission"],"summary":"删除权限","operationId":"delete_1","parameters":[{"name":"id","in":"path","description":"权限ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/permissions/role-permissions":{"get":{"tags":["Permission"],"summary":"列出角色-权限映射","operationId":"listRolePermissions","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/RolePermission"}}}}}}}},"/api/feedings/{id}":{"get":{"tags":["Feeding"],"summary":"根据 ID 获取投喂记录","operationId":"get_3","parameters":[{"name":"id","in":"path","description":"投喂记录ID","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/FeedingRecord"}}}}}}},"/api/configs/{key}":{"get":{"tags":["SystemConfig"],"summary":"根据键获取配置","operationId":"get_5","parameters":[{"name":"key","in":"path","description":"配置键","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/SystemConfig"}}}}}},"delete":{"tags":["SystemConfig"],"summary":"删除配置","operationId":"delete_4","parameters":[{"name":"key","in":"path","description":"配置键","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/api/auth/check":{"get":{"tags":["Auth"],"summary":"检查用户是否拥有指定权限","operationId":"hasPermission","parameters":[{"name":"userId","in":"query","description":"用户ID","required":true,"schema":{"type":"string"}},{"name":"permissionCode","in":"query","description":"权限编码","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"boolean"}}}}}}}},"components":{"schemas":{"UserAccount":{"type":"object","properties":{"userId":{"type":"string"},"username":{"type":"string"},"passwordHash":{"type":"string"},"employeeId":{"type":"string"},"role":{"type":"string"},"email":{"type":"string"},"phone":{"type":"string"},"avatarUrl":{"type":"string"},"active":{"type":"boolean"},"locked":{"type":"boolean"},"failedAttempts":{"type":"integer","format":"int32"},"lockedUntil":{"type":"string","format":"date-time"},"createdAt":{"type":"string","format":"date-time"},"lastLogin":{"type":"string","format":"date-time"},"passwordChangedAt":{"type":"string","format":"date-time"}}},"Feed":{"type":"object","properties":{"feedId":{"type":"string"},"name":{"type":"string"},"category":{"type":"string"},"stockQuantity":{"type":"number"},"unit":{"type":"string"},"safetyStock":{"type":"number"},"supplier":{"type":"string"},"unitPrice":{"type":"number"},"createdBy":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedBy":{"type":"string"},"updatedAt":{"type":"string","format":"date-time"}}},"Enclosure":{"type":"object","properties":{"enclosureId":{"type":"string"},"name":{"type":"string"},"capacity":{"type":"integer","format":"int32"},"currentAnimalCount":{"type":"integer","format":"int32"},"status":{"type":"string"},"description":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Permission":{"type":"object","properties":{"permissionId":{"type":"string"},"permissionCode":{"type":"string"},"permissionName":{"type":"string"},"description":{"type":"string"},"module":{"type":"string"}}},"OperationLog":{"type":"object","properties":{"logId":{"type":"integer","format":"int32"},"userId":{"type":"string"},"operationTime":{"type":"string","format":"date-time"},"module":{"type":"string"},"operationType":{"type":"string"},"tableName":{"type":"string"},"recordId":{"type":"string"},"oldValues":{"type":"string"},"newValues":{"type":"string"},"ipAddress":{"type":"string"},"description":{"type":"string"}}},"LoginLog":{"type":"object","properties":{"logId":{"type":"integer","format":"int32"},"userId":{"type":"string"},"loginTime":{"type":"string","format":"date-time"},"ipAddress":{"type":"string"},"userAgent":{"type":"string"},"loginStatus":{"type":"string"},"failureReason":{"type":"string"}}},"FeedingRecord":{"type":"object","properties":{"recordId":{"type":"string"},"feedingTime":{"type":"string","format":"date-time"},"animalId":{"type":"string"},"feedId":{"type":"string"},"employeeId":{"type":"string"},"quantity":{"type":"number"},"notes":{"type":"string"},"status":{"type":"string"},"createdBy":{"type":"string"},"verifiedBy":{"type":"string"},"verificationTime":{"type":"string","format":"date-time"},"verificationNotes":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"SystemConfig":{"type":"object","properties":{"configKey":{"type":"string"},"configValue":{"type":"string"},"configType":{"type":"string"},"description":{"type":"string"},"publicConfig":{"type":"boolean"},"updatedBy":{"type":"string"},"updatedAt":{"type":"string","format":"date-time"}}},"RolePermission":{"type":"object","properties":{"role":{"type":"string"},"permissionId":{"type":"string"},"grantedAt":{"type":"string","format":"date-time"},"grantedBy":{"type":"string"}}}}}

